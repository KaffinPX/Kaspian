<html>
  <head>
    <script type="text/javascript">      
      window.addEventListener('kaspa:provider', ({ detail }) => {
        document.getElementById('providers').innerHTML += `<button id="${detail.name}">Connect ${detail.name}</button>`
    
        document.getElementById(detail.name).onclick = () => {
          console.log('Connecting...')

          window.dispatchEvent(new CustomEvent("kaspa:connect", {
            detail: detail.id
          }))
        }

        window.addEventListener('kaspa:event', (event) => {
          document.getElementById(detail.name).hidden = true

          if (event.detail.event === 'account') {
            document.getElementById('balance').innerText = `Balance: ${event.detail.data.balance}`
          document.getElementById('details').hidden = false
          }

          console.log(event.detail)
        })
      })
    </script>
  </head>
  <body>
    <h1>Kaspian Provider test</h1>
    <h2>Detected providers:</h2>

    <div id="providers"></div>
    <div id="details" hidden>
      <p id="balance"></p>
    </div>
  </body>
</html>